<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">


<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>option databrush :: Functions (Flexible Statistics Data Analysis Toolbox&trade;)</title>
<link href="docstyle.css" rel="stylesheet" type="text/css">
<meta content="refpage" name="chunktype">
<script  type="text/javascript" language="javaScript" src="bottom.js"></script>

</head>


<body>

<a name="top_of_page"></a>
<p style="font-size: 1px;">&nbsp;</p>
<table border="0" cellpadding="0" cellspacing="0" class="nav" summary="Navigation aid" width="100%">
	<tr>
		<td valign="baseline"><b>Flexible Statistics Data Analysis Toolbox&trade;</b></td>
		<td align="right" valign="baseline"><a href="covplot.html">
		<img align="bottom" alt="minplot" border="0" src="images_help/b_prev.gif"></a>&nbsp;&nbsp;
		<a href="dsxy2figxy.html">
		<img align="bottom" alt="rescale" border="0" src="images_help/b_next.gif"></a></td>
	</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" class="feedbacklinktop" width="100%">
	<tr>
		<td>&nbsp;</td>
		<td align="right"><a href="mailto:toolboxFS@unipr.it?subject=feedback">Provide 
		feedback on FSDA toolbox</a> </td>
	</tr>
</table>
<a name="olsline-1"></a><a class="indexterm" name="olsline"></a>
<h1 class="reftitle">databrush option </h1>
<p class="purpose">Interactive brushing option, common to <tt>fanplot</tt>, <tt>mdrplot</tt>, <tt>resfwdplot</tt>, <tt>levfwdplot
, 
mmdplot, malfwdplot</tt>.
</p>
<h2>Syntax </h2>
<p class="synopsis">
<tt>xxxplot(out,...,'databrush','',...)</tt>
<br>
<tt>xxxplot(out,...,'databrush',1,...)
<br>xxxplot(out,...,'databrush&#39;,databrushstruct,...) </tt></p>
<tt>xxx</tt> stands for <tt>fan</tt>, <tt>min</tt>, <tt>res</tt>, or <tt>lev.<br>
databrushstruct</tt> is a structure described below<h2>Description</h2>
<p>Remark: databrush is not a function which can be called directly. 
It is only an option inside 
functions <tt>fanplot</tt>, <tt>mdrplot</tt>, <tt>resfwdplot</tt>, <tt>levfwdplot
</tt>.
Given that option <tt>databrush</tt> is very elaborate we preferred 
to document it in a common separate page.</p>

<p>Option <tt>databrush</tt> can be an empty value, a scalar or a structure.</p>

<p>If <tt>databrush</tt> is an empty value (default), no brushing is done.</p>

<p>If <tt>databrush</tt> is scalar (for example <tt>databrush=1</tt>) brushing can be done only once 
and all the default options of function <a href="selectdatafs.html">selectdataFS</a> are used.
</p>

<p>
If databrush is a strucutre,
it contains the values of all the fields described in function 
<a href="selectdatafs.html">selectdataFS</a>, and those described in the following table 
(see also the examples at the end of this page).
</p>

<table border="2" cellpadding="4" cellspacing="0" class="body">
	<colgroup>
		<col width="21%"><col width="79%">
	</colgroup>
	<thead>
		<tr valign="top">
			<th bgcolor="#B2B2B2">Parameter</th>
			<th bgcolor="#B2B2B2">Value</th>
		</tr>
	</thead>
	<tr valign="top">
		<td bgcolor="#F2F2F2"><tt>&#39;persist&#39;</tt></td>
		<td bgcolor="#F2F2F2">
		<p>An empty value or a character. If persist&nbsp; is an empty value or 
		a character different from &#39;on&#39; and &#39;off&#39; brushing can be done only once.
		<br>&nbsp;&nbsp;&nbsp; If persist =&#39;on&#39; or &#39;off&#39; brushing can be done as 
		many time as the user requires. <br>&nbsp;&nbsp;&nbsp; If persist=&#39;on&#39; 
		then the unit(s) currently brushed are added to those previously brushed. 
		Every time a brushing unit is performed a different color is used.<br>&nbsp;&nbsp;&nbsp; 
		If persist=&#39;off&#39; every time a new brush is performed, units previously brushed 
		are removed. <br>&nbsp;&nbsp;&nbsp; The default value of persist is &#39;&#39; that 
		is brushing is allowed only once. <br>&nbsp;&nbsp;&nbsp; If persist is &#39;on&#39;, every time a new brushing is done, a different color 
		for the brushed units is used.</p>
		</td>
	</tr>
	<tr>
		<td bgcolor="#F2F2F2" style="height: 54px"><tt>&#39;bivarfit&#39;</tt></td>
		<td bgcolor="#F2F2F2" style="height: 54px">
		<p>This option adds one or more least 
		square lines, based on SIMPLE REGRESSION of y on Xi to the plots of y|Xi.
		<br>&nbsp;&nbsp;&nbsp; bivarfit= &#39;&#39; is the default: no line is fitted.
		<br>&nbsp;&nbsp;&nbsp; bivarfit= &#39;1&#39; fits a single ols line to all points 
		of each bivariate plot in the scatter matrix y|X. <br>&nbsp;&nbsp;&nbsp; 
		bivarfit= &#39;2&#39; fits two ols lines: one to all points and another to the 
		group of the genuine observations. The group of the potential outliers is 
		not fitted. <br>&nbsp;&nbsp;&nbsp; bivarfit= &#39;0&#39; fits one ols line to 
		each group. This is useful for the purpose of fitting mixtures of regression 
		lines.<br>&nbsp;&nbsp;&nbsp; bivarfit= &#39;i1&#39; or &#39;i2&#39; or &#39;i3&#39; etc. fits 
		an ols line to a specific group, the one with index &#39;i&#39; equal to 1, 2, 3 
		etc. Again, useful in case of mixtures. </p>
		</td>
	</tr>
	<tr>
		<td bgcolor="#F2F2F2" style="height: 55px"><tt>&#39;multivarfit&#39;</tt></td>
		<td bgcolor="#F2F2F2" style="height: 55px">
		<p>This option adds one 
		or more least square lines, based on MULTIVARIATE REGRESSION of y on X, 
		to the plots of y|Xi. <br>&nbsp;&nbsp;&nbsp; multivarfit= &#39;&#39; is the default: 
		no line is fitted. <br>&nbsp;&nbsp;&nbsp; multivarfit= &#39;1&#39; fits a single ols 
		line to all points of each bivariate plot in the scatter matrix y|X. The 
		line added to the scatter plot y|Xi is avconst +Ci*Xi, where Ci is the coefficient 
		of Xi in the multivariate regression and avconst is the effect of all the 
		other explanatory variables different from Xi evaluated at their centroid 
		(that is overline{y}&#39;C)) <br>&nbsp;&nbsp;&nbsp; multivarfit= &#39;2&#39; exactly equal 
		to multivarfit=&#39;1&#39; but this time we add the line based on the group of unselected 
		observations.</p>
		</td>
	</tr>
	<tr>
		<td bgcolor="#F2F2F2" style="height: 55px"><tt>&#39;labeladd&#39;</tt></td>
		<td bgcolor="#F2F2F2" style="height: 55px">
		<p>If this option is '1', the text label of the units
                    in the yXplot is added. The default is labeladd=&#39;&#39;</p>
		</td>
	</tr>
	</table>

<p><strong>Details if you start brushing from the resfwdplot or levfwdplot
</strong></p>

<p>The points corresponding to the trajectories selected in the resfwdplot are
automatically highlighted in the yX plot, i.e. a matrix of scatter
                  plots of y against each column of X, grouped according
                  to the selection(s) done by brushing. If the plot yX
                  does not exist it is automatically created.
                  In addition, brushed units are automatically highlighted in the
                  minimum deletion residual plot if it is already open.</p>
    

<p><strong>Details if you start brushing from the mdrplot</strong></p>

<p>The points corresponding to the steps of the search selected in the mdrplot are
automatically highlighted in the yX plot. If the plot yX
                  does not exist it is automatically created.
                  In addition, brushed units are automatically highlighted in the
                  resfwdplot if it is already open.</p>
    
<p><strong>Details if you start brushing from the fanplot</strong></p>

<p>The points corresponding to the steps of the search selected in the fanplot are
automatically highlighted in the yX plot. If the plot yX
                  does not exist it is automatically created.
                  In addition, brushed units are automatically highlighted in the
                  resfwdplot if it is already open.</p>
          
		<table border="1" cellpadding="5" cellspacing="0" class="note" summary="Note">
			<tr width="90%">
				<td>
				<p><b>Note:</b>&nbsp;&nbsp; the window style of the other figures is set
                  equal to that which contains the units which are brushed. In other words, if the monitoring residual plot
                  is docked all the other figures will be docked too.</p>
				</td>
			</tr>
		</table>

<p></p>
<h3>Examples</h3>

<h3>Example 1: brushing from the resfwdplot</h3>
<p>In this example we use the <a href="datasets.html">Forbes data</a></p>
<pre class="programlisting">
load('forbes.txt');
y=forbes(:,2);
X=forbes(:,1);
plot(X,y,'o');
xlabel('Boiling point')
ylabel('100 x log(pressure)')
% running the search
[out]=LXS(y,X,'nsamp',0);
[out]=FSReda(y,X,out.bs);
% Plot minimum deletion residual
mdrplot(out,'xlimx',[6 17],'ylimy',[0 13]);
% Now, some interactive brushing starting from the monitoring residuals
% plot. Once a set of trajectories is highlighted in the monitoring residual plot, 
% the corresponding units are highlighted in the other plots
databrush=struct;
databrush.bivarfit='i1'; 
databrush.selectionmode='Lasso'; % Lasso selection
databrush.persist='on'; % Enable repeated mouse selections
databrush.Label='on'; % Write labels of trajectories while selecting
databrush.RemoveLabels='off'; % Do not remove labels after selection
resfwdplot(out,'databrush',databrush);
</pre>
<p>Figure below shows the output we obtain if we select the trajectory of unit 12 in the monitoring residuals plot.</p>
&nbsp;<p>
<img alt="" src="plots/img9.jpg"></p>
<h3>Example 2: brushing from the mdrplot</h3>

<p>In this example we use a set of simulated data</p>
<pre class="programlisting">
state = 137; state1=4567;
rand('state', state);
randn('state', state1);
X=randn(200,3);
y=chi2rnd(8,200,1);
[outLXS]=LXS(y,X,'nsamp',1000);
[out]=FSReda(y,X,outLXS.bs);
mdrplot(out,'sign',1);
%Example where databrush is a structure
databrush=struct
databrush.selectionmode='Lasso'
mdrplot(out,'databrush',databrush)
</pre>
<p>Figure below shows the output we obtain if we select the last steps in the monitoring of minimum deletion residual plot.</p>

<img src="plots/wp1uvvay.jpg">
<p></p>
<h3>Example 3: brushing from the resindexplot
</h3>
<p>In this example we use the well known <a href="datasets.html">stack loss data.</a></p>

<pre class="programlisting">
load('stack_loss.txt');
y=stack_loss(:,4);
X=stack_loss(:,1:3);
nameX={'x1=air flow', 'x2=cooling water inlet temperature' 'x3=10 × (acid concentration ?50)'};
namey={'y=Stack loss'};
databrush=struct;
databrush.selectionmode='Brush'; % Brush selection
databrush.persist='on'; % Enable repeated mouse selections
databrush.Label='on'; % Write labels of the units while selecting
databrush.RemoveLabels='on'; % Remove labels after selection
databrush.RemoveTool    = 'on'; % Remove yellow tool after selection
databrush.RemoveFlagged = 'on'; % Remove filled red color for selected points after selection
[out]=LXS(y,X,'rew',1,'lms',0,'yxsave',1);
resindexplot(out,'databrush',databrush,'namey',namey,'nameX',nameX)
</pre>

<p>Figure below shows the output we obtain if we select units&nbsp; 1, 2, 3 and 
21 in the index plot of residuals.</p>
<p><img alt="" src="plots/img1B.jpg"></p>
<p>At this point the user can do other selections in the index plot of residuals or terminate the brushing.</p>


<h3>See Also</h3>
<p>
<a href="yxplot.html"><tt>yXplot</tt></a>,
<a href="matlab:web(['jar:file:///',matlabroot,'/help/toolbox/stats/help.jar!/gplotmatrix.html'],'-helpbrowser')">
<tt>gplotmatrix</tt></a>, 
<a href="matlab:web(['jar:file:///',matlabroot,'/help/toolbox/stats/help.jar!/lsline.html'],'-helpbrowser')">
<tt>lsline</tt></a>

</p>
<p></p>
<table border="0" cellpadding="0" cellspacing="0" class="feedbacklinkbot" width="100%">
	<tr>
		<td>&nbsp;</td>
		<td align="right"><a href="mailto:toolboxFS@unipr.it?subject=feedback">Provide 
		feedback on FSDA toolbox</a> </td>
	</tr>
</table>
<p></p>
<table border="0" cellpadding="0" cellspacing="0" class="nav" summary="Navigation aid" width="100%">
	<tr valign="top">
		<td align="left" width="20"><a href="covplot.html">
		<img align="bottom" alt="minplot" border="0" src="images_help/b_prev.gif"></a>
		</td>
		<td align="left">covplot.html</td>
		<td>&nbsp;</td>
		<td align="right">dsxy2figxy.html</td>
		<td align="right" width="20"><a href="dsxy2figxy.html">
		<img align="bottom" alt="rescale" border="0" src="images_help/b_next.gif"></a></td>
	</tr>
</table>
<script type ="text/javascript" language="javaScript">
document.write(barra);
</script>

</body>

</html>
